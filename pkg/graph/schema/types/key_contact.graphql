type KeyContact {
  id: UUID!

  # Note that this is dependent on if team or not a team
  userID: UUID
  userAccount: UserAccount
  name: String
  email: String

  mailboxTitle: String
  mailboxAddress: String

  subjectCategoryID: UUID!
  subjectArea: String!

  # Metadata columns
  createdBy: UUID!
  createdByUserAccount: UserAccount!
  createdDts: Time!
  modifiedBy: UUID
  modifiedByUserAccount: UserAccount
  modifiedDts: Time
}

"""
Input for updating a key contact.
Only subject category, subject area, and mailbox title can be changed.
"""
input KeyContactUpdateChanges @goModel(model: "map[string]interface{}") {
  subjectCategoryID: UUID
  subjectArea: String
  mailboxTitle: String
}

extend type Query {
  # List all key contacts
  keyContacts: [KeyContact!]!

  # Get a single key contact by id
  keyContact(id: UUID!): KeyContact! @hasAnyRole(roles: [MINT_ASSESSMENT])
}

extend type Mutation {
  createKeyContactMailbox(
    mailboxTitle: String!
    mailboxAddress: String!
    subjectArea: String!
    subjectCategoryID: UUID!
  ): KeyContact! @hasAnyRole(roles: [MINT_ASSESSMENT])

  createKeyContactUser(
    userName: String!
    subjectArea: String!
    subjectCategoryID: UUID!
  ): KeyContact! @hasAnyRole(roles: [MINT_ASSESSMENT])

  updateKeyContact(id: UUID!, changes: KeyContactUpdateChanges!): KeyContact!
    @hasAnyRole(roles: [MINT_ASSESSMENT])

  deleteKeyContact(id: UUID!): KeyContact! @hasAnyRole(roles: [MINT_ASSESSMENT])
}
